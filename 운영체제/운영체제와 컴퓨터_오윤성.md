# 운영체제와 컴퓨터

### 운영체제란?
---
운영체제는 안정적으로 자원들을 통제하는 하나의 소프트웨어입니다.

사용자는 컴퓨터의 하드웨어에 접근하기 위해서는 운영체제를 통해야 합니다.
운영체제 없이 하드웨어에 접근할 수 있게 된다면 보안에 굉장히 취약해집니다. 운영체제는 외부로부터 잘못된 접근 또는 공격을 막기 위해서 유저모드와 커널모드 2가지를 갖고  있습니다. 
유저모드 일 때는 하드웨어에 접근할 수 없지만,, 소프트웨어를 통해 유저모드를 커널모드로 변경하여 하드웨어에 접근할 수 있습니다. 


따라서 운영체제는 하드웨어와 사용자 간의 인터페이스로서 동작하는 시스템 소프트웨어의 일종입니다.

---
### 운영 체제의 목적
- 컴퓨터 시스템을 편리하게 이용
- 컴퓨터 자원(하드웨어)을 효율적으로 관리

운영체제를 한마디로 요약하자면,, 


운영체제의 목적에 대해서 알아보았는데요. 이제 운영체제가 정확하게 어떤 역할을 하는지 알아보겠습니다. 

### 운영체제의 역할
---
운영체제의 역할은 크게 4가지 입니다. 

- CPU스케줄링과 프로세스 관리 : CPU소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원 할당 및 반환을 관리(FIFO, SJF(Shortest Job First), Round Robin Scheduling, priority scheduling 등)

- 메모리 관리 : 한정된 메모리를 어떤 프로세스에 얼마큼 할당해야 하는지 관리

- 디스크 파일 관리 : 디스크 파일을 어떠한 방법으로 보관할지 관리 (파일 생성, 수정, 제거, 공유, 백업, 복구, 주기억장치와 보조기억장치간의 파일전송 등)

- I/O 디바이스 관리 : I/O디바이스들인 마우스, 키보드와 컴퓨터 간에 데이터를 주고 받는 것을 관리

정리를 해보면,, 
CPU는 한명의 일꾼이라고 할 수 있는데, 운영체제는 이 일꾼에게 어떤 일을 시킬 것인지, 어떤 일에 얼만큼 우선순위를 둘지 결정하는 역할을 합니다. 그리고 가지고 있는 자원(메모리, HDD 등)을 효율적으로 제어하는 역할도 합니다.

### 운영 체제의 종류
---
- Window
- LINUX
- UNIX
- MS-DOX
주로 window는 개인용 UNIX, LINUX는 서버용 운영체제로 사용됩니다. 


### System Call, 시스템콜 
--- 
운영체제가 커널에 접근하기 위한 인터페이스이며 유저 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출할 때 사용합니다. 

유저 프로그램(앱) <-> 시스템 콜 <-> 커널 <-> 하드웨어
앱이 하드웨어의 자원을 사용하기 위해 커널에 접근 해야 하는 데 이때 커널에 접근하기 위해서는 시스템 콜을 사용해야합니다. 
이 관점에서 볼 때, 시스템 콜은 유저 프로그램과 커널을 연결해주는 인터페이스라고 볼 수 있습니다.  

시스템 콜은 하나의 추상화 계층입니다. 
왜냐하면 프로세스나 스레드에서 운영체제로 어떠한 요청을 할 때 시스템콜이라는 인터페이스와 커널을 거쳐 운영체제에 전달되기 때문입니다. 

### Modebit
유저모드와 커널모드를 구분하기 위한 플래그 변수.

- `유저모드` modebit = 1 
- `커널모드` modebit = 0 

카메라, 키보드 같은 디바이스들은 운영체제를 통해서만 동작해야 합니다. 유저 모드를 기반으로 카메라가 켜진다면, 사용자가 의도하지 않았는데 공격자가 카메라를 갑자기 켤 수 있습니다. 
물론 커널 모드를 거쳐 동작한다고 해도 100% 막기는 어렵지만, 운영체제를 통해 작동하게 해야 막기 쉽습니다. 

**카메라 동작 예시**
유저모드 시작
1. 유저가 프로그램을 통해 카메라 사용 요청 
2. 시스템 콜이 modebit을 0으로 변경 
커널모드로 변경됨
3. 카메라를 이용한 사진 or 동영상 촬영
유저모드로 변경됨
4. 이후 로직 수행 (갤러리로 이동 or 편집 어플 실행)

### 컴퓨터의 요소
---
컴퓨터는 CPU, DMA, 컨트롤러, 메모리 등으로 이루어져 있습니다. 

### CPU(Central Processing Unit)
산술논리연산장치, 제어장치, 레지스터로 3가지로 구성되어 있는 장치. 인터럽트에 의해 단순히 메모리에 존재하는 명령어를 해석해서 실행하는 `일꾼` 입니다.

운영체제의 커널이 프로그램을 메모리에 올려 프로세스로 만들면 일꾼인 CPU가 일을 처리합니다. 

### CU(Control Unit), 제어장치
---
프로세스 조작을 지시하는 CPU의 한 부품. 데이터 처리를 위한 순서를 결정합니다. 

### 레지스터
CPU안에 있는 매우 빠른 임시기억장치.
CPU와 직접 연결되어 있으므로 연산 속도가 메모리보다 수백 배까지 빠릅니다. CPU는 자체적으로 데이터를 저장할 방법이 없기 때문에 레지스터를 거쳐 데이터를 전달합니다. 

### ALU(Arithmeric Logic Unit), 산술논리연산장치
덧셈, 뺼셈 같은 두 숫자의 산술 연산과 배타적 논리합, 논리곱 같은 논리 연산을 하는 디지털 회로.


**CPU가 연산하는 방법**
산술논리연산장치 <- 제어장치 -> 메모리 <-> 레지스터 <- 산술논리연산장치
1. 제어장치가 메모리에 계산할 값을 로드합니다. 또한, 레지스터에도 로드합니다. 
2. 제어장치가 레지스터에 있는 값을 계산하라고 산술논리연산장치에 명령합니다. 
3. 제어장치가 계산된 값을 다시 레지스터에서 메모리로 계산한 값을 저장합니다. 

### 인터럽트 
어떤 신호가 들어왔을 때 CPU를 잠깐 정지시키는 것을 말함. 
인터럽트에는 하드웨어 소프트웨어 인터럽트로 나뉘는데.
키보드나 마우스 등 입출력 장치로부터 발생하는 인터럽트를 하드웨어 인터럽트라 하고, 
0으로 숫자를 나누는 산술 연산에서의 인터럽트와 프로세스 오류 등으로 발생하는 인터럽트를 소프트웨어 인터럽트라 합니다. 

인터럽트 간에는 우선순위가 있고 우선순위에 따라 실행됩니다. 

### Direct Memory Access Controller, DMA 컨트롤러
I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치. CPU에만 너무 많은 인터럽트 요청이 들어오기 때문에 CPU 부하를 막아주며 CPU의 일을 부담합니다. 하나의 작업을 CPU와 DMA 컨트롤러가 동시에 하는 것을 방지.

### RAM(Random Acces Memory), 메모리
단기적으로 데이터 저장 및 액세스 공간을 제공하는 메모리.

- 흔히 렘이라고 말하는 장치는 데이터나 상태, 명령어 등을 기록하는 장치입니다. 
- 프로그램이 실행되는 동안 필요한 정보를 저장하는 컴퓨터 메모리. 
- 저장된 데이터를 순차적이 아닌 임의의 순서로 액세스할 수 있는 데이터 저장소.

램의 작동 방식의 예를 하나 들자면, 컴퓨터를 켜고 이메일을 확인한 다음 스프레드시트를 편집할 경우, 다음과 같이 여러 가지 방법으로 메모리를 사용합니다.

- 스프레드시트 프로그램 및 이메일과 같은 앱의 로딩 및 실행
- 이메일 삭제 및 스프레드시트 편집 등 명령에 응답
- 스프레드시트와 이메일 확인 사이를 이동하는 등 열린 프로그램 간의 전환

어떤 면에서, 메모리는 책상 위 공간과 같습니다. 책상이 넓으면 다양한 프로젝트 작업을 동시에 할 수 있습니다. 책상이 넓으면 넓을수록 한 번에 더 많은 종이와 폴더를 올려놓고 더 많은 작업을 할 수 있습니다. 서류 캐비닛(스토리지 드라이브)을 뒤적여 볼 필요 없이 빠르고 쉽게 정보에 접근할 수 있습니다.

다른 예시를 들어보면 메모리는 고속도로의 톨게이트와도 같습니다.
톨게이트에 차선이 많을 수록 많은 차들을 처리할 수 있고, 차선이 적으면 교통 체증이 발생할 확률이 올라갑니다. 
이처럼 메모리의 용량이 많으면 많을수록 많은 일들을 처리할 수 있고, 적으면 로딩 시간 지연, 반응하지 않는 프로그램들이 생길 수 있습니다. 


---
### 질문 목록
- 운영체제의 역할은 무엇인가요?
- 시스템 콜의 역할은 무엇인가요?
- GUI와 CUI의 차이점은 무엇인가요?
- 인터럽트란?


---
### Reference 
- 운영체제 (박규석)
- https://coding-factory.tistory.com/300